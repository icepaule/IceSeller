<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Adresslabel - Bestellung #{{ order.id }}</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Arial, Helvetica, sans-serif;
            color: #111;
        }
        .label-page {
            width: 148mm;   /* DIN A5 landscape */
            height: 105mm;
            padding: 8mm;
            position: relative;
            page-break-after: always;
        }
        /* Sender: small, top-left, underlined (like a real shipping label) */
        .sender {
            font-size: 7pt;
            color: #555;
            border-bottom: 1px solid #999;
            padding-bottom: 2mm;
            margin-bottom: 6mm;
            line-height: 1.3;
        }
        /* Recipient: large, prominent */
        .recipient {
            padding-left: 5mm;
            line-height: 1.5;
        }
        .recipient .name {
            font-size: 16pt;
            font-weight: bold;
            margin-bottom: 2mm;
        }
        .recipient .street {
            font-size: 14pt;
        }
        .recipient .city-line {
            font-size: 16pt;
            font-weight: bold;
            margin-top: 2mm;
        }
        .recipient .country {
            font-size: 12pt;
            font-weight: bold;
            text-transform: uppercase;
            margin-top: 3mm;
        }
        /* Internal number badge (bottom right) */
        .internal-nr {
            position: absolute;
            bottom: 8mm;
            right: 8mm;
            font-family: monospace;
            font-size: 14pt;
            font-weight: bold;
            border: 2px solid #333;
            padding: 2mm 4mm;
            background: #ffe;
        }
        @media print {
            @page {
                size: 148mm 105mm;
                margin: 0;
            }
            body { margin: 0; }
            .no-print { display: none !important; }
        }
        @media screen {
            body { background: #888; padding: 20px; }
            .label-page {
                background: white;
                margin: 10px auto;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            }
        }
        .print-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 10px 25px;
            background: #333;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            z-index: 1000;
        }
        .print-btn:hover { background: #555; }
        .tip {
            text-align: center;
            color: #ccc;
            font-size: 11px;
            margin-top: 10px;
            font-family: sans-serif;
        }
    </style>
</head>
<body>
<button class="print-btn no-print" onclick="window.print()">Drucken</button>
<p class="tip no-print">Tipp: Seitengroesse auf A5 Querformat einstellen oder auf A4 drucken und ausschneiden.</p>

<div class="label-page">

    <!-- Sender (small, one line with underline) -->
    <div class="sender">
        Abs: {{ sender.name }} &middot; {{ sender.street }} &middot; {{ sender.postal_code }} {{ sender.city }}
    </div>

    <!-- Recipient (large) -->
    {% if order.buyer_address %}
    <div class="recipient">
        <div class="name">{{ order.buyer_address.get('name', '') }}</div>
        <div class="street">{{ order.buyer_address.get('street', '') }}</div>
        {% if order.buyer_address.get('street2') %}
        <div class="street">{{ order.buyer_address.get('street2') }}</div>
        {% endif %}
        <div class="city-line">{{ order.buyer_address.get('postal_code', '') }} {{ order.buyer_address.get('city', '') }}</div>
        {% if order.buyer_address.get('country', 'DE') != 'DE' %}
        <div class="country">{{ order.buyer_address.get('country', '') }}</div>
        {% endif %}
    </div>
    {% else %}
    <div class="recipient">
        <div class="name" style="color: #c00;">Keine Adresse vorhanden</div>
    </div>
    {% endif %}

    <!-- Internal number (for warehouse identification) -->
    {% if item %}
    <div class="internal-nr">{{ item.internal_number or 'IS-%d'|format(item.id) }}</div>
    {% endif %}

</div>
</body>
</html>
